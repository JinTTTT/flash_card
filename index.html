<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Card - English Learning</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <meta name="theme-color" content="#4CAF50">
</head>
<body>
    <header>
        <h1>Flash Card Learning</h1>
        <nav>
            <button class="nav-btn active" data-section="search">üîç Search</button>
            <button class="nav-btn" data-section="add">‚ûï Add Word</button>
            <button class="nav-btn" data-section="review">üìö Review</button>
            <button class="nav-btn" data-section="wordlist">üìù Word List</button>
            <button class="nav-btn" data-section="settings">‚öôÔ∏è Settings</button>
        </nav>
    </header>

    <main>
        <!-- Êü•ËØçÂå∫Âüü -->
        <section id="search" class="section active">
            <div class="container">
                <h2>üîç Search Dictionary</h2>
                
                <div class="search-form">
                    <div class="search-input-group">
                        <input type="text" id="search-input" placeholder="Enter a word to search..." autocomplete="off">
                        <button type="button" id="search-btn" class="btn primary">Search</button>
                    </div>
                </div>

                <div id="search-results" class="search-results" style="display: none;">
                    <div class="word-card">
                        <div class="word-header">
                            <h3 id="result-word" class="word-title"></h3>
                            <span id="result-phonetic" class="phonetic"></span>
                            <button id="play-audio" class="audio-btn" style="display: none;">üîä</button>
                        </div>
                        
                        <div class="word-content">
                            <div class="part-of-speech">
                                <span id="result-pos" class="pos-tag"></span>
                            </div>
                            
                            <div class="definition">
                                <strong>Definition:</strong>
                                <p id="result-definition"></p>
                            </div>
                            
                            <div id="example-section" class="example" style="display: none;">
                                <strong>Example:</strong>
                                <p id="result-example"></p>
                            </div>
                            
                            <div class="word-actions">
                                <button id="add-to-words" class="btn success">‚ûï Add to My Words</button>
                                <button id="search-another" class="btn secondary">üîç Search Another</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="search-message" class="message"></div>
                
                <div class="search-hints">
                    <h4>üí° Quick Tips:</h4>
                    <ul>
                        <li>Search any English word to get definition and examples</li>
                        <li>Click "Add to My Words" to start learning</li>
                        <li>All added words appear in your Review and Word List</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Ê∑ªÂä†ÂçïËØçÂå∫Âüü -->
        <section id="add" class="section">
            <div class="container">
                <h2>Add New Word</h2>
                <form id="word-form">
                    <div class="form-group">
                        <label for="word">Word/Phrase:</label>
                        <input type="text" id="word" required placeholder="e.g., nail down">
                    </div>
                    
                    <div class="form-group">
                        <label for="definition">Definition:</label>
                        <input type="text" id="definition" required placeholder="e.g., successfully complete/clarify/figure out">
                    </div>
                    
                    <div class="form-group">
                        <label for="examples">Example:</label>
                        <textarea id="examples" required placeholder="e.g., We need to nail down the details of this project"></textarea>
                    </div>
                    
                    <button type="submit" class="btn primary">Save Word</button>
                </form>
                
                <div class="data-operations">
                    <h3>Data Management</h3>
                    <div class="data-controls">
                        <input type="file" id="data-import" accept=".json" style="display: none;">
                        <button class="btn secondary" onclick="document.getElementById('data-import').click()">Import Data</button>
                        <button class="btn primary" id="export-data">Export Data</button>
                    </div>
                    <div class="import-hint" id="import-hint" style="display: none;">
                        <p>üí° <strong>First time?</strong> Import the vocabulary.json file to get started with example words, or manually add your own words above.</p>
                    </div>
                </div>
                
                <div id="add-message" class="message"></div>
            </div>
        </section>


        <!-- Â§ç‰π†/Flash CardÂå∫Âüü -->
        <section id="review" class="section">
            <div class="container">
                <div class="review-info">
                    <span id="review-progress">Progress: 0/0</span>
                </div>

                <div id="flashcard-container">
                    <!-- Êó†Â§ç‰π†ÂÜÖÂÆπÁä∂ÊÄÅ -->
                    <div id="no-review" class="empty-state">
                        <p>No words to review today</p>
                        <button class="btn primary" onclick="showSection('add')">Add New Words</button>
                    </div>

                    <!-- Flash Card -->
                    <div id="flashcard" class="flashcard">
                        <div class="card">
                            <!-- Initial stage: word + remember/don't remember buttons -->
                            <div class="card-front">
                                <div class="word-display" id="current-word"></div>
                                <div class="review-buttons" id="initial-buttons">
                                    <button class="btn success" id="remember-btn">Remember</button>
                                    <button class="btn danger" id="dont-remember-btn">Don't Remember</button>
                                </div>
                            </div>
                            
                            <!-- Middle stage: examples + recall check buttons -->
                            <div class="card-middle" style="display: none;">
                                <div class="word-display" id="current-word-middle"></div>
                                <div class="examples-display" id="current-examples-middle"></div>
                                <div class="recall-buttons">
                                    <button class="btn warning" id="recalled-btn">Now I Remember</button>
                                    <button class="btn danger" id="still-dont-know-btn">Still Don't Know</button>
                                </div>
                            </div>
                            
                            <!-- Final stage: full answer + next button -->
                            <div class="card-back">
                                <div class="word-display" id="current-word-back"></div>
                                <div class="definition-display" id="current-definition"></div>
                                <div class="examples-display" id="current-examples"></div>
                                <div class="next-button-container">
                                    <button class="btn primary" id="next-btn">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÂçïËØçÂàóË°®Âå∫Âüü -->
        <section id="wordlist" class="section">
            <div class="container">
                <h2>Word List</h2>
                <div class="word-stats">
                    <span id="total-words">Total words: 0</span>
                </div>
                
                <div class="word-list-container">
                    <div id="word-list-content">
                        <!-- ÂçïËØçÂàóË°®Â∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                    
                    <div id="empty-word-list" class="empty-state" style="display: none;">
                        <p>No words found</p>
                        <button class="btn primary" onclick="showSection('add')">Add New Words</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ËÆæÁΩÆÂå∫Âüü -->
        <section id="settings" class="section">
            <div class="container">
                <h2>‚öôÔ∏è Settings</h2>
                
                <div class="settings-section">
                    <h3>üîë API Configuration</h3>
                    <p class="settings-description">
                        Configure your Microsoft Translator API key for high-quality Chinese translations. 
                        The key is stored locally in your browser and never sent to our servers.
                    </p>
                    
                    <div class="form-group">
                        <label for="api-key-input">Microsoft Translator API Key:</label>
                        <div class="api-key-group">
                            <input type="password" id="api-key-input" placeholder="Enter your API key..." class="api-key-input">
                            <button type="button" id="show-api-key" class="btn secondary small">üëÅÔ∏è</button>
                            <button type="button" id="save-api-key" class="btn primary">Save</button>
                        </div>
                        <div class="api-key-status" id="api-key-status">
                            <!-- Áä∂ÊÄÅ‰ø°ÊÅØ -->
                        </div>
                    </div>

                    <div class="settings-help">
                        <h4>üìã How to get your API key:</h4>
                        <ol>
                            <li>Visit <a href="https://azure.microsoft.com/en-us/services/cognitive-services/translator/" target="_blank">Azure Translator</a></li>
                            <li>Create a free account (200‰∏áÂ≠óÁ¨¶/ÊúàÂÖçË¥πÈ¢ùÂ∫¶)</li>
                            <li>Create a Translator resource</li>
                            <li>Copy the API key from the resource dashboard</li>
                            <li>Paste it above and click Save</li>
                        </ol>
                        
                        <div class="settings-note">
                            <strong>üîí Privacy:</strong> Your API key is stored locally in your browser. 
                            We never collect or store your keys on our servers.
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üóÇÔ∏è Data Management</h3>
                    <div class="data-controls">
                        <button id="data-import" class="btn secondary">üì• Import Data</button>
                        <button id="export-data" class="btn secondary">üì§ Export Data</button>
                        <input type="file" id="file-input" accept=".json" style="display: none;">
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üßπ Cache Management</h3>
                    <p class="settings-description">
                        Clear cached translations and search results to free up browser storage.
                    </p>
                    <button id="clear-cache" class="btn warning">üóëÔ∏è Clear All Cache</button>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2024 Flash Card Learning - Based on Ebbinghaus Forgetting Curve</p>
    </footer>

    <script src="js/core/storage.js"></script>
    <script src="js/core/algorithm.js"></script>
    <script src="js/core/review.js"></script>
    <script src="js/core/pronunciation.js"></script>
    <script src="js/core/dictionary.js"></script>
    <script src="js/core/translator.js"></script>
    <script src="js/ui/components.js"></script>
    <script src="js/ui/events.js"></script>
    <script src="js/app.js"></script>
</body>
</html>